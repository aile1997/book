# 组颜色生成算法参考文档

## 📋 算法概述

本系统使用 **黄金角度分布算法** 生成组颜色，确保：
1. ✅ 颜色差异明显（相邻组颜色区分度高）
2. ✅ 有规律可循（按预订顺序在色环上渐变）
3. ✅ 视觉一致性（固定饱和度和亮度）

---

## 🎨 颜色参数

### HSL 颜色空间
- **H（Hue，色相）**：0° - 360°，决定颜色类型（红、橙、黄、绿、青、蓝、紫）
- **S（Saturation，饱和度）**：0% - 100%，决定颜色鲜艳程度
- **L（Lightness，亮度）**：0% - 100%，决定颜色明暗程度

### 本系统配置
- **色相**：使用黄金角度（137.508°）分布，起始 200°（蓝色系）
- **饱和度**：固定 75%（鲜艳但不刺眼）
- **亮度**：固定 52%（适合在白色背景上显示深色文字）

---

## 📊 颜色序列示例

### 10 个组的颜色分布

| 组序号 | HSL 值 | 颜色描述 | 视觉效果 |
|--------|---------|----------|----------|
| 组 1 | `hsl(200, 75%, 52%)` | 蓝色 | 🔵 |
| 组 2 | `hsl(337, 75%, 52%)` | 粉红 | 🌸 |
| 组 3 | `hsl(115, 75%, 52%)` | 绿色 | 🟢 |
| 组 4 | `hsl(252, 75%, 52%)` | 紫色 | 🟣 |
| 组 5 | `hsl(30, 75%, 52%)` | 橙色 | 🟠 |
| 组 6 | `hsl(167, 75%, 52%)` | 青绿 | 🩵 |
| 组 7 | `hsl(305, 75%, 52%)` | 品红 | 🩷 |
| 组 8 | `hsl(82, 75%, 52%)` | 黄绿 | 🟡 |
| 组 9 | `hsl(220, 75%, 52%)` | 深蓝 | 🔵 |
| 组 10 | `hsl(357, 75%, 52%)` | 玫红 | 🌹 |

---

## 🔬 算法原理

### 黄金角度（Golden Angle）

**定义**：黄金角度 ≈ 137.508°（360° × (1 - 1/φ)，其中 φ ≈ 1.618）

**优势**：
- 在色环上均匀分布颜色
- 避免颜色聚集或重复
- 确保相邻组的颜色差异最大化

**对比传统算法**：
```
传统均匀分布（360/n）：
  n=4 → 0°, 90°, 180°, 270°（可能颜色聚集）

黄金角度分布：
  n=4 → 200°, 337°, 115°, 252°（颜色分散）
```

### 颜色渐变规律

```
起始色相：200°（蓝色）
         ↓
组 1：200°（蓝） → 冷色调
组 2：337°（粉红）
组 3：115°（绿）
组 4：252°（紫）
组 5：30°（橙） → 暖色调
...
```

**特点**：
- 先预订的组：冷色调（蓝、紫、青）
- 后预订的组：暖色调（橙、红、粉）
- 颜色在色环上按规律跳跃，避免相邻组颜色相似

---

## 💡 使用场景

### 桌子视图中的组标识

```
┌─────────────────────────────────┐
│  桌子 A                          │
├─────────────────────────────────┤
│  [A1] 🔵 组1                     │
│  [A2] 🟣 组4                     │
│  [A3] 🟠 组5                     │
└─────────────────────────────────┘
```

### ALL 页面中的组卡片

```
┌─────────────────────────────────┐
│  🔵 组1                          │
│  成员：张三、李四、王五           │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│  🟠 组5                          │
│  成员：赵六、钱七                 │
└─────────────────────────────────┘
```

---

## 🛠️ 技术实现

### 核心代码

```typescript
function generateDistinctColors(count: number, startHue: number = 200): string[] {
  if (count === 0) return [];
  if (count === 1) return [`hsl(${startHue}, 75%, 52%)`];

  const colors: string[] = [];
  const goldenAngle = 137.508; // 黄金角度

  for (let i = 0; i < count; i++) {
    const hue = Math.floor((startHue + i * goldenAngle) % 360);
    colors.push(`hsl(${hue}, 75%, 52%)`);
  }

  return colors;
}
```

### 使用示例

```typescript
// 为 5 个组生成颜色
const colors = generateDistinctColors(5);
// 结果：
// [
//   'hsl(200, 75%, 52%)',  // 组 1
//   'hsl(337, 75%, 52%)',  // 组 2
//   'hsl(115, 75%, 52%)',  // 组 3
//   'hsl(252, 75%, 52%)',  // 组 4
//   'hsl(30, 75%, 52%)'    // 组 5
// ]
```

---

## 🎯 设计原则

### 1. 颜色差异最大化
- 使用黄金角度分布，确保相邻组颜色差异 ≥ 60°（人眼可区分的最小色相差）

### 2. 视觉一致性
- 固定饱和度（75%）和亮度（52%）
- 避免随机参数导致的颜色不一致

### 3. 可扩展性
- 支持任意数量的组（1-100+）
- 颜色分布始终均匀

### 4. 无障碍友好
- 亮度 52% 确保在白色背景上可读
- 饱和度 75% 确保色盲用户可区分

---

## 📈 性能优化

- **时间复杂度**：O(n)，n 为组数量
- **空间复杂度**：O(n)，存储颜色数组
- **适用场景**：最多支持 100+ 个组（超过 100 个后颜色可能重复）

---

## 🔍 调试技巧

### 查看生成的颜色

```typescript
// 在浏览器控制台执行
const colors = generateDistinctColors(10);
colors.forEach((color, i) => {
  console.log(`组 ${i + 1}: ${color}`);
});
```

### 可视化颜色卡片

```html
<div
  v-for="(color, i) in colors"
  :key="i"
  :style="{ backgroundColor: color }"
  class="w-16 h-16 rounded-lg"
>
  组 {{ i + 1 }}
</div>
```

---

## 📚 参考资料

- [HSL 颜色空间](https://en.wikipedia.org/wiki/HSL_and_HSV)
- [黄金角度](https://en.wikipedia.org/wiki/Golden_angle)
- [颜色对比度](https://webaim.org/articles/contrast/)

---

**文档版本**：v1.0
**最后更新**：2026-01-14
**维护者**：前端团队
